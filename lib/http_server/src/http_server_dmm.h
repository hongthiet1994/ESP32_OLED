#include <stdio.h>
#include <string.h>
#include <stdint.h> 

#define HTTP_DEBUG      "HTTP_DEBUG"

#define BUFFER_SIZE 1024
#define HASH_LEN 32 /* SHA-256 digest length */
#define IPV4_GOTIP_BIT   BIT0
#define IPV6_GOTIP_BIT   BIT1

#define      LEN_BUFFER_WEB_SETTING               	2210
#define         LEN_BUFFER_WEB_OPEN                 	4095
#define UPLOAD_HTML "<form method='POST' action='' enctype='multipart/form-data' id='dung_form'> <input type='file' name='update' id='dung_file'> <input type='submit' value='Upload'></form><div id='dung_progress'>progress: 0%</div><script>var form=document.getElementById('dung_form');form.onsubmit=function(event){var progress=document.getElementById('dung_progress'); var mdfile=document.getElementById('dung_file'); var data=new FormData();/*written by mquocdung*/ var xhr=new XMLHttpRequest(); var mquocdung_file=mdfile.files[0]; data.append('update', mquocdung_file, mquocdung_file.name); xhr.open('POST', '/upload', true); xhr.upload.onprogress=function (e){if (e.lengthComputable){var per=e.loaded/e.total; progress.innerHTML='progress: '+Math.round(per*100)+'%';}}; xhr.onload=function (e){}; xhr.send(data); event.preventDefault();}</script>"
#define HOME_HTML "ESP32 HELLO"
#define SCAN_WIFI_HTML "SCANING WIFI "

#define HTML_WIFI_SETTING "<html><head> <meta charset='UTF-8'> <meta name='viewport' content='width=device-width, initial-scale=1'> <style>#main{font-family: 'Times New Roman', Times, serif !important; margin: auto; padding: 10px; min-width: 480px;}label, input, button, option{font-size: 20px;}input, select{width: 320px; border: 2px solid;}h1, button{text-align: center;}td, th{border: none; padding: 8px;}h1{font-size: 50px;}#main>h1>i:first-child{font-size: 32px;}#main>h1>i span{font-size: 65px;}table{display: table; margin: 0 auto;}.form-group:last-child{text-align: center;}select{overflow-x: scroll;}select option:checked{background: #1E90FF; color: #fff; display: inline-block;}input{padding: 5px 10px;}@media only screen and (max-width: 767px){label{font-size: 17px;}#main{max-width: 767px; min-width: unset; padding: unset;}#main>h1, #main>h1>i:last-child{font-size: 15px;}#main>h1>i:first-child{font-size: 12px;}#main>h1>i:last-child span{font-size: 20px;}.content>h2{font-size: 17px;}table label, table input, button{font-size: 15px;}}@media only screen and (min-width: 1000px){h1{font-size: 40px;}}</style></head><body> <section id='main'> <h1 style='color: blue'><i style='font-weight: 100'></i> <i><span></span><span>M</span>ultimeter</i> </h1> <h1>Wi-Fi Setup</h1> <form action='' method='POST' id='dung_form'> <div class='' style='display: table; margin: 0 auto'> <div class='form-group'> <label>Muiltimeter ID</label> <br><input id='DEVICEID' type='text' name='DEVICEID' maxlength='14' placeholder='1 ~ 14 characters' value='%s'/> </div><br><div class='form-group'> <label>Available Wi-Fi networks</label> <br><select id='wifi_lst' name='SSID' size='10'></select> </div><br><div class='form-group'> <label>Password</label> <br><input id='PASS' type='text' name='PASSWORD'/> </div><div class='form-group'> <br><br><button type='submit' style='background-color: yellow; border: 1px solid; '>Save settings</button> </div></div></form> </section> <script>var wifi='%s'; document.addEventListener('DOMContentLoaded', function(event){var w=wifi.split(','); var lst=document.getElementById('wifi_lst'); for (var i=0; i < w.length - 1; i++){var option=document.createElement('option'); option.text=w[i]; lst.add(option);}}); var form=document.getElementById('dung_form'); form.onsubmit=function(event){event.preventDefault(); var text1=document.getElementById('wifi_lst'); var text2=document.getElementById('PASS'); var text3=document.getElementById('DEVICEID'); var data=new FormData(); /*written by mquocdung*/ var xhr=new XMLHttpRequest(); xhr.open('POST', window.location.href, true); if(text1.selectedIndex >= 0){xhr.setRequestHeader('SSID', text1.options[text1.selectedIndex].value);}if(text2.value.length > 0){xhr.setRequestHeader('PASSWORD', text2.value);}if(text3.value.length > 0){xhr.setRequestHeader('DEVICEID', text3.value);}xhr.upload.onprogress=function(e){}; xhr.onload=function(e){document.getElementsByTagName('html')[0].innerHTML=xhr.responseText;}; xhr.send(data);}</script></body></html>"

#define HTML_WIFI_CONNECTED "<!DOCTYPE html><html lang='en'><head> <meta charset='UTF-8'> <meta name='viewport' content='width=device-width, initial-scale=1'> <meta http-equiv='X-UA-Compatible' content='ie=edge'> <title>Wi-Fi Setup</title> <style>#main{font-family: 'Times New Roman', Times, serif !important; margin: auto; padding: 10px; min-width: 480px;}label, input, button, option{font-size: 20px;}input, select{width: 320px; border: 2px solid;}h1, button{text-align: center;}td, th{border: none; padding: 8px;}h1{font-size: 50px;}#main>h1>i:first-child{font-size: 32px;}#main>h1>i span{font-size: 65px;}table{display: table; margin: 0 auto;}.form-group:last-child{text-align: center;}select{overflow-x: scroll;}select option:checked{background: #1E90FF; color: #fff; display: inline-block;}input{padding: 5px 10px;}@media only screen and (max-width: 767px){label{font-size: 17px;}#main{max-width: 767px; min-width: unset; padding: unset;}#main>h1, #main>h1>i:last-child{font-size: 15px;}#main>h1>i:first-child{font-size: 12px;}#main>h1>i:last-child span{font-size: 20px;}.content>h2{font-size: 17px;}table label, table input, button{font-size: 15px;}}@media only screen and (min-width: 1000px){h1{font-size: 40px;}.content{display: table; margin: 0 auto; width: 75%;}}</style></head><body> <section id='main'> <h1 style='color: blue'><i style='font-weight: 100'></i> <i><span></span><span>M</span>ultimeter</i> </h1> <h1 style='text-align: center'>Wi-Fi Setup</h1> <div class='content'> <h2></h2> <h2 style='font-weight: 200'></h2> <h2 style='font-weight: 200'></h2> </div></section> <script>function select(element){document.getElementById('network').value=element.value}</script></body></html>"

#define HTML_WIFI_DISCONNETED "<!DOCTYPE html><html lang='en'><head> <meta charset='UTF-8'> <meta name='viewport' content='width=device-width, initial-scale=1'> <meta http-equiv='X-UA-Compatible' content='ie=edge'> <title>Wi-Fi Setup</title> <style>#main{font-family: 'Times New Roman', Times, serif !important; margin: auto; padding: 10px; min-width: 480px;}label, input, button, option{font-size: 20px;}input, select{width: 320px; border: 2px solid;}h1, button{text-align: center;}td, th{border: none; padding: 8px;}h1{font-size: 50px;}#main>h1>i:first-child{font-size: 32px;}#main>h1>i span{font-size: 65px;}table{display: table; margin: 0 auto;}.form-group:last-child{text-align: center;}select{overflow-x: scroll;}select option:checked{background: #1E90FF; color: #fff; display: inline-block;}input{padding: 5px 10px;}@media only screen and (max-width: 767px){label{font-size: 17px;}#main{max-width: 767px; min-width: unset; padding: unset;}#main>h1, #main>h1>i:last-child{font-size: 15px;}#main>h1>i:first-child{font-size: 12px;}#main>h1>i:last-child span{font-size: 20px;}.content>h2{font-size: 17px;}table label, table input, button{font-size: 15px;}}@media only screen and (min-width: 1000px){h1{font-size: 40px;}.content{display: table; margin: 0 auto; width: 75%;}}</style></head><body> <section id='main'> <h1 style='color: blue'><i style='font-weight: 100'></i> <i><span></span><span>M</span>ultimeter</i> </h1> <h1 style='text-align: center'>WiFi disconnected</h1> <div class='content'> <h2></h2> <h2 style='font-weight: 200'></h2> <h2 style='font-weight: 200'></h2> </div></section> <script>function select(element){document.getElementById('network').value=element.value}</script></body></html>"

#define HTML_CHANGE_DEVICEID_SUCCESSFULLY "<!DOCTYPE html><html lang='en'><head> <meta charset='UTF-8'> <meta name='viewport' content='width=device-width, initial-scale=1'> <meta http-equiv='X-UA-Compatible' content='ie=edge'> <title>Wi-Fi Setup</title> <style>#main{font-family: 'Times New Roman', Times, serif !important; margin: auto; padding: 10px; min-width: 480px;}label, input, button, option{font-size: 20px;}input, select{width: 320px; border: 2px solid;}h1, button{text-align: center;}td, th{border: none; padding: 8px;}h1{font-size: 50px;}#main>h1>i:first-child{font-size: 32px;}#main>h1>i span{font-size: 65px;}table{display: table; margin: 0 auto;}.form-group:last-child{text-align: center;}select{overflow-x: scroll;}select option:checked{background: #1E90FF; color: #fff; display: inline-block;}input{padding: 5px 10px;}@media only screen and (max-width: 767px){label{font-size: 17px;}#main{max-width: 767px; min-width: unset; padding: unset;}#main>h1, #main>h1>i:last-child{font-size: 15px;}#main>h1>i:first-child{font-size: 12px;}#main>h1>i:last-child span{font-size: 20px;}.content>h2{font-size: 17px;}table label, table input, button{font-size: 15px;}}@media only screen and (min-width: 1000px){h1{font-size: 40px;}.content{display: table; margin: 0 auto; width: 75%;}}</style></head><body> <section id='main'> <h1 style='color: blue'><i style='font-weight: 100'></i> <i><span></span><span>M</span>ultimeter</i> </h1> <h1 style='text-align: center'>Change device ID successfully</h1> <div class='content'> <h2></h2> <h2 style='font-weight: 200'></h2> <h2 style='font-weight: 200'></h2> </div></section> <script>function select(element){document.getElementById('network').value=element.value}</script></body></html>"
void start_web();
